{"ast":null,"code":"import { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n  var lights = new WebGLLights();\n  var lightsArray = [];\n  var shadowsArray = [];\n\n  function init() {\n    lightsArray.length = 0;\n    shadowsArray.length = 0;\n  }\n\n  function pushLight(light) {\n    lightsArray.push(light);\n  }\n\n  function pushShadow(shadowLight) {\n    shadowsArray.push(shadowLight);\n  }\n\n  function setupLights(camera) {\n    lights.setup(lightsArray, shadowsArray, camera);\n  }\n\n  var state = {\n    lightsArray: lightsArray,\n    shadowsArray: shadowsArray,\n    lights: lights\n  };\n  return {\n    init: init,\n    state: state,\n    setupLights: setupLights,\n    pushLight: pushLight,\n    pushShadow: pushShadow\n  };\n}\n\nfunction WebGLRenderStates() {\n  var renderStates = new WeakMap();\n\n  function get(scene, camera) {\n    var renderState;\n\n    if (renderStates.has(scene) === false) {\n      renderState = new WebGLRenderState();\n      renderStates.set(scene, new WeakMap());\n      renderStates.get(scene).set(camera, renderState);\n    } else {\n      if (renderStates.get(scene).has(camera) === false) {\n        renderState = new WebGLRenderState();\n        renderStates.get(scene).set(camera, renderState);\n      } else {\n        renderState = renderStates.get(scene).get(camera);\n      }\n    }\n\n    return renderState;\n  }\n\n  function dispose() {\n    renderStates = new WeakMap();\n  }\n\n  return {\n    get: get,\n    dispose: dispose\n  };\n}\n\nexport { WebGLRenderStates };","map":{"version":3,"sources":["/Users/sebringrose/Projects/theEmpire/website/client/node_modules/three/src/renderers/webgl/WebGLRenderStates.js"],"names":["WebGLLights","WebGLRenderState","lights","lightsArray","shadowsArray","init","length","pushLight","light","push","pushShadow","shadowLight","setupLights","camera","setup","state","WebGLRenderStates","renderStates","WeakMap","get","scene","renderState","has","set","dispose"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;;AAEA,SAASC,gBAAT,GAA4B;AAE3B,MAAMC,MAAM,GAAG,IAAIF,WAAJ,EAAf;AAEA,MAAMG,WAAW,GAAG,EAApB;AACA,MAAMC,YAAY,GAAG,EAArB;;AAEA,WAASC,IAAT,GAAgB;AAEfF,IAAAA,WAAW,CAACG,MAAZ,GAAqB,CAArB;AACAF,IAAAA,YAAY,CAACE,MAAb,GAAsB,CAAtB;AAEA;;AAED,WAASC,SAAT,CAAoBC,KAApB,EAA4B;AAE3BL,IAAAA,WAAW,CAACM,IAAZ,CAAkBD,KAAlB;AAEA;;AAED,WAASE,UAAT,CAAqBC,WAArB,EAAmC;AAElCP,IAAAA,YAAY,CAACK,IAAb,CAAmBE,WAAnB;AAEA;;AAED,WAASC,WAAT,CAAsBC,MAAtB,EAA+B;AAE9BX,IAAAA,MAAM,CAACY,KAAP,CAAcX,WAAd,EAA2BC,YAA3B,EAAyCS,MAAzC;AAEA;;AAED,MAAME,KAAK,GAAG;AACbZ,IAAAA,WAAW,EAAEA,WADA;AAEbC,IAAAA,YAAY,EAAEA,YAFD;AAIbF,IAAAA,MAAM,EAAEA;AAJK,GAAd;AAOA,SAAO;AACNG,IAAAA,IAAI,EAAEA,IADA;AAENU,IAAAA,KAAK,EAAEA,KAFD;AAGNH,IAAAA,WAAW,EAAEA,WAHP;AAKNL,IAAAA,SAAS,EAAEA,SALL;AAMNG,IAAAA,UAAU,EAAEA;AANN,GAAP;AASA;;AAED,SAASM,iBAAT,GAA6B;AAE5B,MAAIC,YAAY,GAAG,IAAIC,OAAJ,EAAnB;;AAEA,WAASC,GAAT,CAAcC,KAAd,EAAqBP,MAArB,EAA8B;AAE7B,QAAIQ,WAAJ;;AAEA,QAAKJ,YAAY,CAACK,GAAb,CAAkBF,KAAlB,MAA8B,KAAnC,EAA2C;AAE1CC,MAAAA,WAAW,GAAG,IAAIpB,gBAAJ,EAAd;AACAgB,MAAAA,YAAY,CAACM,GAAb,CAAkBH,KAAlB,EAAyB,IAAIF,OAAJ,EAAzB;AACAD,MAAAA,YAAY,CAACE,GAAb,CAAkBC,KAAlB,EAA0BG,GAA1B,CAA+BV,MAA/B,EAAuCQ,WAAvC;AAEA,KAND,MAMO;AAEN,UAAKJ,YAAY,CAACE,GAAb,CAAkBC,KAAlB,EAA0BE,GAA1B,CAA+BT,MAA/B,MAA4C,KAAjD,EAAyD;AAExDQ,QAAAA,WAAW,GAAG,IAAIpB,gBAAJ,EAAd;AACAgB,QAAAA,YAAY,CAACE,GAAb,CAAkBC,KAAlB,EAA0BG,GAA1B,CAA+BV,MAA/B,EAAuCQ,WAAvC;AAEA,OALD,MAKO;AAENA,QAAAA,WAAW,GAAGJ,YAAY,CAACE,GAAb,CAAkBC,KAAlB,EAA0BD,GAA1B,CAA+BN,MAA/B,CAAd;AAEA;AAED;;AAED,WAAOQ,WAAP;AAEA;;AAED,WAASG,OAAT,GAAmB;AAElBP,IAAAA,YAAY,GAAG,IAAIC,OAAJ,EAAf;AAEA;;AAED,SAAO;AACNC,IAAAA,GAAG,EAAEA,GADC;AAENK,IAAAA,OAAO,EAAEA;AAFH,GAAP;AAKA;;AAGD,SAASR,iBAAT","sourcesContent":["import { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n\n\tconst lights = new WebGLLights();\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, camera ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n"]},"metadata":{},"sourceType":"module"}