{"ast":null,"code":"import { Vector3 } from '../math/Vector3.js';\nimport { Quaternion } from '../math/Quaternion.js';\nimport { Clock } from '../core/Clock.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { AudioContext } from './AudioContext.js';\n\nvar _position = /*@__PURE__*/new Vector3();\n\nvar _quaternion = /*@__PURE__*/new Quaternion();\n\nvar _scale = /*@__PURE__*/new Vector3();\n\nvar _orientation = /*@__PURE__*/new Vector3();\n\nclass AudioListener extends Object3D {\n  constructor() {\n    super();\n    this.type = 'AudioListener';\n    this.context = AudioContext.getContext();\n    this.gain = this.context.createGain();\n    this.gain.connect(this.context.destination);\n    this.filter = null;\n    this.timeDelta = 0; // private\n\n    this._clock = new Clock();\n  }\n\n  getInput() {\n    return this.gain;\n  }\n\n  removeFilter() {\n    if (this.filter !== null) {\n      this.gain.disconnect(this.filter);\n      this.filter.disconnect(this.context.destination);\n      this.gain.connect(this.context.destination);\n      this.filter = null;\n    }\n\n    return this;\n  }\n\n  getFilter() {\n    return this.filter;\n  }\n\n  setFilter(value) {\n    if (this.filter !== null) {\n      this.gain.disconnect(this.filter);\n      this.filter.disconnect(this.context.destination);\n    } else {\n      this.gain.disconnect(this.context.destination);\n    }\n\n    this.filter = value;\n    this.gain.connect(this.filter);\n    this.filter.connect(this.context.destination);\n    return this;\n  }\n\n  getMasterVolume() {\n    return this.gain.gain.value;\n  }\n\n  setMasterVolume(value) {\n    this.gain.gain.setTargetAtTime(value, this.context.currentTime, 0.01);\n    return this;\n  }\n\n  updateMatrixWorld(force) {\n    super.updateMatrixWorld(force);\n    var listener = this.context.listener;\n    var up = this.up;\n    this.timeDelta = this._clock.getDelta();\n    this.matrixWorld.decompose(_position, _quaternion, _scale);\n\n    _orientation.set(0, 0, -1).applyQuaternion(_quaternion);\n\n    if (listener.positionX) {\n      // code path for Chrome (see #14393)\n      var endTime = this.context.currentTime + this.timeDelta;\n      listener.positionX.linearRampToValueAtTime(_position.x, endTime);\n      listener.positionY.linearRampToValueAtTime(_position.y, endTime);\n      listener.positionZ.linearRampToValueAtTime(_position.z, endTime);\n      listener.forwardX.linearRampToValueAtTime(_orientation.x, endTime);\n      listener.forwardY.linearRampToValueAtTime(_orientation.y, endTime);\n      listener.forwardZ.linearRampToValueAtTime(_orientation.z, endTime);\n      listener.upX.linearRampToValueAtTime(up.x, endTime);\n      listener.upY.linearRampToValueAtTime(up.y, endTime);\n      listener.upZ.linearRampToValueAtTime(up.z, endTime);\n    } else {\n      listener.setPosition(_position.x, _position.y, _position.z);\n      listener.setOrientation(_orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z);\n    }\n  }\n\n}\n\nexport { AudioListener };","map":{"version":3,"sources":["/Users/sebringrose/Projects/theEmpire/website/client/node_modules/three/src/audio/AudioListener.js"],"names":["Vector3","Quaternion","Clock","Object3D","AudioContext","_position","_quaternion","_scale","_orientation","AudioListener","constructor","type","context","getContext","gain","createGain","connect","destination","filter","timeDelta","_clock","getInput","removeFilter","disconnect","getFilter","setFilter","value","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","updateMatrixWorld","force","listener","up","getDelta","matrixWorld","decompose","set","applyQuaternion","positionX","endTime","linearRampToValueAtTime","x","positionY","y","positionZ","z","forwardX","forwardY","forwardZ","upX","upY","upZ","setPosition","setOrientation"],"mappings":"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","sourcesContent":["import { Vector3 } from '../math/Vector3.js';\nimport { Quaternion } from '../math/Quaternion.js';\nimport { Clock } from '../core/Clock.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { AudioContext } from './AudioContext.js';\n\nconst _position = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\nconst _scale = /*@__PURE__*/ new Vector3();\nconst _orientation = /*@__PURE__*/ new Vector3();\n\nclass AudioListener extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'AudioListener';\n\n\t\tthis.context = AudioContext.getContext();\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( this.context.destination );\n\n\t\tthis.filter = null;\n\n\t\tthis.timeDelta = 0;\n\n\t\t// private\n\n\t\tthis._clock = new Clock();\n\n\t}\n\n\tgetInput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tremoveFilter() {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.filter;\n\n\t}\n\n\tsetFilter( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t}\n\n\tgetMasterVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetMasterVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tconst listener = this.context.listener;\n\t\tconst up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, _scale );\n\n\t\t_orientation.set( 0, 0, - 1 ).applyQuaternion( _quaternion );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position.x, _position.y, _position.z );\n\t\t\tlistener.setOrientation( _orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n}\n\nexport { AudioListener };\n"]},"metadata":{},"sourceType":"module"}