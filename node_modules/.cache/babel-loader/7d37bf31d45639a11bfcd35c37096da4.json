{"ast":null,"code":"import { MathUtils } from '../math/MathUtils.js';\nimport { StaticDrawUsage } from '../constants.js';\n\nfunction InterleavedBuffer(array, stride) {\n  this.array = array;\n  this.stride = stride;\n  this.count = array !== undefined ? array.length / stride : 0;\n  this.usage = StaticDrawUsage;\n  this.updateRange = {\n    offset: 0,\n    count: -1\n  };\n  this.version = 0;\n  this.uuid = MathUtils.generateUUID();\n}\n\nObject.defineProperty(InterleavedBuffer.prototype, 'needsUpdate', {\n  set: function set(value) {\n    if (value === true) this.version++;\n  }\n});\nObject.assign(InterleavedBuffer.prototype, {\n  isInterleavedBuffer: true,\n  onUploadCallback: function onUploadCallback() {},\n  setUsage: function setUsage(value) {\n    this.usage = value;\n    return this;\n  },\n  copy: function copy(source) {\n    this.array = new source.array.constructor(source.array);\n    this.count = source.count;\n    this.stride = source.stride;\n    this.usage = source.usage;\n    return this;\n  },\n  copyAt: function copyAt(index1, attribute, index2) {\n    index1 *= this.stride;\n    index2 *= attribute.stride;\n\n    for (var i = 0, l = this.stride; i < l; i++) {\n      this.array[index1 + i] = attribute.array[index2 + i];\n    }\n\n    return this;\n  },\n  set: function set(value, offset) {\n    if (offset === undefined) offset = 0;\n    this.array.set(value, offset);\n    return this;\n  },\n  clone: function clone(data) {\n    if (data.arrayBuffers === undefined) {\n      data.arrayBuffers = {};\n    }\n\n    if (this.array.buffer._uuid === undefined) {\n      this.array.buffer._uuid = MathUtils.generateUUID();\n    }\n\n    if (data.arrayBuffers[this.array.buffer._uuid] === undefined) {\n      data.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer;\n    }\n\n    var array = new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]);\n    var ib = new InterleavedBuffer(array, this.stride);\n    ib.setUsage(this.usage);\n    return ib;\n  },\n  onUpload: function onUpload(callback) {\n    this.onUploadCallback = callback;\n    return this;\n  },\n  toJSON: function toJSON(data) {\n    if (data.arrayBuffers === undefined) {\n      data.arrayBuffers = {};\n    } // generate UUID for array buffer if necessary\n\n\n    if (this.array.buffer._uuid === undefined) {\n      this.array.buffer._uuid = MathUtils.generateUUID();\n    }\n\n    if (data.arrayBuffers[this.array.buffer._uuid] === undefined) {\n      data.arrayBuffers[this.array.buffer._uuid] = Array.prototype.slice.call(new Uint32Array(this.array.buffer));\n    } //\n\n\n    return {\n      uuid: this.uuid,\n      buffer: this.array.buffer._uuid,\n      type: this.array.constructor.name,\n      stride: this.stride\n    };\n  }\n});\nexport { InterleavedBuffer };","map":{"version":3,"sources":["/Users/sebringrose/Projects/theEmpire/website/client/node_modules/three/src/core/InterleavedBuffer.js"],"names":["MathUtils","StaticDrawUsage","InterleavedBuffer","array","stride","count","undefined","length","usage","updateRange","offset","version","uuid","generateUUID","Object","defineProperty","prototype","set","value","assign","isInterleavedBuffer","onUploadCallback","setUsage","copy","source","constructor","copyAt","index1","attribute","index2","i","l","clone","data","arrayBuffers","buffer","_uuid","slice","ib","onUpload","callback","toJSON","Array","call","Uint32Array","type","name"],"mappings":"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","sourcesContent":["import { MathUtils } from '../math/MathUtils.js';\nimport { StaticDrawUsage } from '../constants.js';\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n} );\n\nexport { InterleavedBuffer };\n"]},"metadata":{},"sourceType":"module"}