{"ast":null,"code":"function WebGLObjects(gl, geometries, attributes, info) {\n  var updateMap = new WeakMap();\n\n  function update(object) {\n    var frame = info.render.frame;\n    var geometry = object.geometry;\n    var buffergeometry = geometries.get(object, geometry); // Update once per frame\n\n    if (updateMap.get(buffergeometry) !== frame) {\n      if (geometry.isGeometry) {\n        buffergeometry.updateFromObject(object);\n      }\n\n      geometries.update(buffergeometry);\n      updateMap.set(buffergeometry, frame);\n    }\n\n    if (object.isInstancedMesh) {\n      attributes.update(object.instanceMatrix, gl.ARRAY_BUFFER);\n\n      if (object.instanceColor !== null) {\n        attributes.update(object.instanceColor, gl.ARRAY_BUFFER);\n      }\n    }\n\n    return buffergeometry;\n  }\n\n  function dispose() {\n    updateMap = new WeakMap();\n  }\n\n  return {\n    update: update,\n    dispose: dispose\n  };\n}\n\nexport { WebGLObjects };","map":{"version":3,"sources":["/Users/sebringrose/Projects/theEmpire/website/client/node_modules/three/src/renderers/webgl/WebGLObjects.js"],"names":["WebGLObjects","gl","geometries","attributes","info","updateMap","WeakMap","update","object","frame","render","geometry","buffergeometry","get","isGeometry","updateFromObject","set","isInstancedMesh","instanceMatrix","ARRAY_BUFFER","instanceColor","dispose"],"mappings":"AAAA,SAASA,YAAT,CAAuBC,EAAvB,EAA2BC,UAA3B,EAAuCC,UAAvC,EAAmDC,IAAnD,EAA0D;AAEzD,MAAIC,SAAS,GAAG,IAAIC,OAAJ,EAAhB;;AAEA,WAASC,MAAT,CAAiBC,MAAjB,EAA0B;AAEzB,QAAMC,KAAK,GAAGL,IAAI,CAACM,MAAL,CAAYD,KAA1B;AAEA,QAAME,QAAQ,GAAGH,MAAM,CAACG,QAAxB;AACA,QAAMC,cAAc,GAAGV,UAAU,CAACW,GAAX,CAAgBL,MAAhB,EAAwBG,QAAxB,CAAvB,CALyB,CAOzB;;AAEA,QAAKN,SAAS,CAACQ,GAAV,CAAeD,cAAf,MAAoCH,KAAzC,EAAiD;AAEhD,UAAKE,QAAQ,CAACG,UAAd,EAA2B;AAE1BF,QAAAA,cAAc,CAACG,gBAAf,CAAiCP,MAAjC;AAEA;;AAEDN,MAAAA,UAAU,CAACK,MAAX,CAAmBK,cAAnB;AAEAP,MAAAA,SAAS,CAACW,GAAV,CAAeJ,cAAf,EAA+BH,KAA/B;AAEA;;AAED,QAAKD,MAAM,CAACS,eAAZ,EAA8B;AAE7Bd,MAAAA,UAAU,CAACI,MAAX,CAAmBC,MAAM,CAACU,cAA1B,EAA0CjB,EAAE,CAACkB,YAA7C;;AAEA,UAAKX,MAAM,CAACY,aAAP,KAAyB,IAA9B,EAAqC;AAEpCjB,QAAAA,UAAU,CAACI,MAAX,CAAmBC,MAAM,CAACY,aAA1B,EAAyCnB,EAAE,CAACkB,YAA5C;AAEA;AAED;;AAED,WAAOP,cAAP;AAEA;;AAED,WAASS,OAAT,GAAmB;AAElBhB,IAAAA,SAAS,GAAG,IAAIC,OAAJ,EAAZ;AAEA;;AAED,SAAO;AAENC,IAAAA,MAAM,EAAEA,MAFF;AAGNc,IAAAA,OAAO,EAAEA;AAHH,GAAP;AAOA;;AAGD,SAASrB,YAAT","sourcesContent":["function WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n"]},"metadata":{},"sourceType":"module"}